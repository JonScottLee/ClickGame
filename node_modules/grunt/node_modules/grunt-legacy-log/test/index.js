'use strict';

var legacyLog = require('../');
var Log = legacyLog.Log;

// Helper for testing stdout
var hooker = require('hooker');
function stdoutEqual(test, callback, expected) {
  var actual = '';
  // Hook process.stdout.write
  hooker.hook(process.stdout, 'write', {
    // This gets executed before the original process.stdout.write.
    pre: function(result) {
      // Concatenate uncolored result onto actual.
      actual += result;
      // Prevent the original process.stdout.write from executing.
      return hooker.preempt();
    },
  });
  // Execute the logging code to be tested.
  callback();
  // Restore process.stdout.write to its original value.
  stdoutUnmute();
  // Actually test the actually-logged stdout string to the expected value.
  // test.equal(legacyLog.uncolor(actual), expected);
  test.equal(actual, expected);
}

// Outright mute stdout.
function stdoutMute() {
  hooker.hook(process.stdout, 'write', {
    pre: function() {
      return hooker.preempt();
    },
  });
}

// Unmute stdout.
function stdoutUnmute() {
  hooker.unhook(process.stdout, 'write');
}

// Helper function: repeat('a', 3) -> 'aaa', repeat('a', 3, '-') -> 'a-a-a'
function repeat(str, n, separator) {
  var result = str;
  for (var i = 1; i < n; i++) {
    result += (separator || '') + str;
  }
  return result;
}

var fooBuffer = new Buffer('foo');

exports['Log instance'] = {
  setUp: function(done) {
    this.grunt = {fail: {errorcount: 0}};
    done();
  },
  'write': function(test) {
    test.expect(4);
    var log = new Log();

    stdoutEqual(test, function() { log.write(''); }, '');
    stdoutEqual(test, function() { log.write('foo'); }, 'foo');
    stdoutEqual(test, function() { log.write('%s', 'foo'); }, 'foo');
    stdoutEqual(test, function() { log.write(fooBuffer); }, 'foo');

    test.done();
  },
  'writeln': function(test) {
    test.expect(4);
    var log = new Log();

    stdoutEqual(test, function() { log.writeln(); }, '\n');
    stdoutEqual(test, function() { log.writeln('foo'); }, 'foo\n');
    stdoutEqual(test, function() { log.writeln('%s', 'foo'); }, 'foo\n');
    stdoutEqual(test, function() { log.writeln(fooBuffer); }, 'foo\n');

    test.done();
  },
  'warn': function(test) {
    test.expect(5);
    var log = new Log({grunt: this.grunt});

    stdoutEqual(test, function() { log.warn(); }, 'ERROR'.red + '\n');
    stdoutEqual(test, function() { log.warn('foo'); }, '>> '.red + 'foo\n');
    stdoutEqual(test, function() { log.warn('%s', 'foo'); }, '>> '.red + 'foo\n');
    stdoutEqual(test, function() { log.warn(fooBuffer); }, '>> '.red + 'foo\n');
    test.equal(this.grunt.fail.errorcount, 0);

    test.done();
  },
  'error': function(test) {
    test.expect(5);
    var log = new Log({grunt: this.grunt});

    stdoutEqual(test, function() { log.error(); }, 'ERROR'.red + '\n');
    stdoutEqual(test, function() { log.error('foo'); }, '>> '.red + 'foo\n');
    stdoutEqual(test, function() { log.error('%s', 'foo'); }, '>> '.red + 'foo\n');
    stdoutEqual(test, function() { log.error(fooBuffer); }, '>> '.red + 'foo\n');
    test.equal(this.grunt.fail.errorcount, 4);

    test.done();
  },
  'ok': function(test) {
    test.expect(4);
    var log = new Log({grunt: this.grunt});

    stdoutEqual(test, function() { log.ok(); }, 'OK'.green + '\n');
    stdoutEqual(test, function() { log.ok('foo'); }, '>> '.green + 'foo\n');
    stdoutEqual(test, function() { log.ok('%s', 'foo'); }, '>> '.green + 'foo\n');
    stdoutEqual(test, function() { log.ok(fooBuffer); }, '>> '.green + 'foo\n');

    test.done();
  },
  'errorlns': function(test) {
    test.expect(2);
    var log = new Log({grunt: this.grunt});

    stdoutEqual(test, function() {
      log.errorlns(repeat('foo', 30, ' '));
    }, '>> '.red + repeat('foo', 19, ' ') +
      '\n>> '.red + repeat('foo', 11, ' ') + '\n');
    test.equal(this.grunt.fail.errorcount, 1);

    test.done();
  },
  'oklns': function(test) {
    test.expect(1);
    var log = new Log();

    stdoutEqual(test, function() {
      log.oklns(repeat('foo', 30, ' '));
    }, '>> '.green + repeat('foo', 19, ' ') +
      '\n>> '.green + repeat('foo', 11, ' ') + '\n');

    test.done();
  },
  'success': function(test) {
    test.expect(4);
    var log = new Log();

    stdoutEqual(test, function() { log.success(); }, ''.green + '\n');
    stdoutEqual(test, function() { log.success('foo'); }, 'foo'.green + '\n');
    stdoutEqual(test, function() { log.success('%s', 'foo'); }, 'foo'.green + '\n');
    stdoutEqual(test, function() { log.success(fooBuffer); }, 'foo'.green + '\n');

    test.done();
  },
  'fail': function(test) {
    test.expect(4);
    var log = new Log();

    stdoutEqual(test, function() { log.fail(); }, ''.red + '\n');
    stdoutEqual(test, function() { log.fail('foo'); }, 'foo'.red + '\n');
    stdoutEqual(test, function() { log.fail('%s', 'foo'); }, 'foo'.red + '\n');
    stdoutEqual(test, function() { log.fail(fooBuffer); }, 'foo'.red + '\n');

    test.done();
  },
  'header': function(test) {
    test.expect(5);
    var log = new Log();

    stdoutEqual(test, function() { log.header(); }, ''.underline + '\n');
    stdoutEqual(test, function() { log.header(); }, '\n' + ''.underline + '\n');
    stdoutEqual(test, function() { log.header('foo'); }, '\n' + 'foo'.underline + '\n');
    stdoutEqual(test, function() { log.header('%s', 'foo'); }, '\n' + 'foo'.underline + '\n');
    stdoutEqual(test, function() { log.header(fooBuffer); }, '\n' + 'foo'.underline + '\n');

    test.done();
  },
  'subhead': function(test) {
    test.expect(5);
    var log = new Log();

    stdoutEqual(test, function() { log.subhead(); }, ''.bold + '\n');
    stdoutEqual(test, function() { log.subhead(); }, '\n' + ''.bold + '\n');
    stdoutEqual(test, function() { log.subhead('foo'); }, '\n' + 'foo'.bold + '\n');
    stdoutEqual(test, function() { log.subhead('%s', 'foo'); }, '\n' + 'foo'.bold + '\n');
    stdoutEqual(test, function() { log.subhead(fooBuffer); }, '\n' + 'foo'.bold + '\n');

    test.done();
  },
  'writetableln': function(test) {
    test.expect(1);
    var log = new Log();

    stdoutEqual(test, function() {
      log.writetableln([10], [repeat('foo', 10)]);
    }, 'foofoofoof\noofoofoofo\nofoofoofoo\n');

    test.done();
  },
  'writelns': function(test) {
    test.expect(1);
    var log = new Log();

    stdoutEqual(test, function() {
      log.writelns(repeat('foo', 30, ' '));
    }, repeat('foo', 20, ' ') + '\n' +
      repeat('foo', 10, ' ') + '\n');

    test.done();
  },
  'writeflags': function(test) {
    test.expect(3);
    var log = new Log();

    stdoutEqual(test, function() {
      log.writeflags(['a', 'b']);
    }, 'Flags: ' + 'a'.cyan + ', ' + 'b'.cyan + '\n');
    stdoutEqual(test, function() {
      log.writeflags(['a', 'b'], 'Prefix');
    }, 'Prefix: ' + 'a'.cyan + ', ' + 'b'.cyan + '\n');
    stdoutEqual(test, function() {
      log.writeflags({a: true, b: false, c: 0, d: null}, 'Prefix');
    }, 'Prefix: ' + 'a'.cyan + ', ' + 'b=false'.cyan + ', ' + 'c=0'.cyan + ', ' + 'd=null'.cyan + '\n');

    test.done();
  },
  'always': function(test) {
    test.expect(3);
    var log = new Log();

    test.strictEqual(log.always, log);
    test.strictEqual(log.verbose.always, log);
    test.strictEqual(log.notverbose.always, log);

    test.done();
  },
  'or': function(test) {
    test.expect(2);
    var log = new Log();

    test.strictEqual(log.verbose.or, log.notverbose);
    test.strictEqual(log.notverbose.or, log.verbose);

    test.done();
  },
  'hasLogged': function(test) {
    // Should only be true if output has been written!
    test.expect(24);
    var log = new Log();
    test.equal(log.hasLogged, false);
    test.equal(log.verbose.hasLogged, false);
    test.equal(log.notverbose.hasLogged, false);
    log.write('');
    test.equal(log.hasLogged, true);
    test.equal(log.verbose.hasLogged, true);
    test.equal(log.notverbose.hasLogged, true);

    log = new Log({verbose: true});
    log.verbose.write('');
    test.equal(log.hasLogged, true);
    test.equal(log.verbose.hasLogged, true);
    test.equal(log.notverbose.hasLogged, true);

    log = new Log();
    log.notverbose.write('');
    test.equal(log.hasLogged, true);
    test.equal(log.verbose.hasLogged, true);
    test.equal(log.notverbose.hasLogged, true);

    stdoutMute();
    log = new Log({debug: true});
    log.debug('');
    test.equal(log.hasLogged, true);
    test.equal(log.verbose.hasLogged, true);
    test.equal(log.notverbose.hasLogged, true);
    stdoutUnmute();

    // The following should be false since there's a verbose mismatch!
    log = new Log();
    log.verbose.write('');
    test.equal(log.hasLogged, false);
    test.equal(log.verbose.hasLogged, false);
    test.equal(log.notverbose.hasLogged, false);

    log = new Log({verbose: true});
    log.notverbose.write('');
    test.equal(log.hasLogged, false);
    test.equal(log.verbose.hasLogged, false);
    test.equal(log.notverbose.hasLogged, false);

    // The following should be false since there's a debug mismatch!
    log = new Log();
    log.debug('');
    test.equal(log.hasLogged, false);
    test.equal(log.verbose.hasLogged, false);
    test.equal(log.notverbose.hasLogged, false);

    test.done();
  },
  'muted': function(test) {
    test.expect(30);
    var log = new Log();

    test.equal(log.muted, false);
    test.equal(log.verbose.muted, false);
    test.equal(log.notverbose.muted, false);
    test.equal(log.options.muted, false);
    test.equal(log.verbose.options.muted, false);
    test.equal(log.notverbose.options.muted, false);

    log.muted = true;
    test.equal(log.muted, true);
    test.equal(log.verbose.muted, true);
    test.equal(log.notverbose.muted, true);
    test.equal(log.options.muted, true);
    test.equal(log.verbose.options.muted, true);
    test.equal(log.notverbose.options.muted, true);

    log.muted = false;
    test.equal(log.muted, false);
    test.equal(log.verbose.muted, false);
    test.equal(log.notverbose.muted, false);
    test.equal(log.options.muted, false);
    test.equal(log.verbose.options.muted, false);
    test.equal(log.notverbose.options.muted, false);

    log.options.muted = true;
    test.equal(log.muted, true);
    test.equal(log.verbose.muted, true);
    test.equal(log.notverbose.muted, true);
    test.equal(log.options.muted, true);
    test.equal(log.verbose.options.muted, true);
    test.equal(log.notverbose.options.muted, true);

    log.options.muted = false;
    test.equal(log.muted, false);
    test.equal(log.verbose.muted, false);
    test.equal(log.notverbose.muted, false);
    test.equal(log.options.muted, false);
    test.equal(log.verbose.options.muted, false);
    test.equal(log.notverbose.options.muted, false);

    test.done();
  },
  'verbose': function(test) {
    test.expect(15);
    var log = new Log();
    log.muted = true;

    // Test verbose methods to make sure they always return the verbose object.
    test.strictEqual(log.verbose.write(''), log.verbose);
    test.strictEqual(log.verbose.writeln(''), log.verbose);
    test.strictEqual(log.verbose.warn(''), log.verbose);
    test.strictEqual(log.verbose.error(''), log.verbose);
    test.strictEqual(log.verbose.ok(''), log.verbose);
    test.strictEqual(log.verbose.errorlns(''), log.verbose);
    test.strictEqual(log.verbose.oklns(''), log.verbose);
    test.strictEqual(log.verbose.success(''), log.verbose);
    test.strictEqual(log.verbose.fail(''), log.verbose);
    test.strictEqual(log.verbose.header(''), log.verbose);
    test.strictEqual(log.verbose.subhead(''), log.verbose);
    test.strictEqual(log.verbose.debug(''), log.verbose);
    test.strictEqual(log.verbose.writetableln([]), log.verbose);
    test.strictEqual(log.verbose.writelns(''), log.verbose);
    test.strictEqual(log.verbose.writeflags([]), log.verbose);

    test.done();
  },
  'notverbose': function(test) {
    test.expect(15);
    var log = new Log();
    log.muted = true;

    // Test notverbose methods to make sure they always return the notverbose object.
    test.strictEqual(log.notverbose.write(''), log.notverbose);
    test.strictEqual(log.notverbose.writeln(''), log.notverbose);
    test.strictEqual(log.notverbose.warn(''), log.notverbose);
    test.strictEqual(log.notverbose.error(''), log.notverbose);
    test.strictEqual(log.notverbose.ok(''), log.notverbose);
    test.strictEqual(log.notverbose.errorlns(''), log.notverbose);
    test.strictEqual(log.notverbose.oklns(''), log.notverbose);
    test.strictEqual(log.notverbose.success(''), log.notverbose);
    test.strictEqual(log.notverbose.fail(''), log.notverbose);
    test.strictEqual(log.notverbose.header(''), log.notverbose);
    test.strictEqual(log.notverbose.subhead(''), log.notverbose);
    test.strictEqual(log.notverbose.debug(''), log.notverbose);
    test.strictEqual(log.notverbose.writetableln([]), log.notverbose);
    test.strictEqual(log.notverbose.writelns(''), log.notverbose);
    test.strictEqual(log.notverbose.writeflags([]), log.notverbose);

    test.done();
  },
  'options.debug = true': function(test) {
    test.expect(4);
    var log = new Log({debug: true});

    stdoutEqual(test, function() { log.debug(); }, '[D] ' + ''.magenta + '\n');
    stdoutEqual(test, function() { log.debug('foo'); }, '[D] ' + 'foo'.magenta + '\n');
    stdoutEqual(test, function() { log.debug('%s', 'foo'); }, '[D] ' + 'foo'.magenta + '\n');
    stdoutEqual(test, function() { log.debug(fooBuffer); }, '[D] ' + 'foo'.magenta + '\n');

    test.done();
  },
  'options.verbose = false': function(test) {
    test.expect(7);
    var log = new Log({verbose: false});

    stdoutEqual(test, function() { log.notverbose.write('foo'); }, 'foo');
    stdoutEqual(test, function() { log.notverbose.write('%s', 'foo'); }, 'foo');
    stdoutEqual(test, function() { log.notverbose.write(fooBuffer); }, 'foo');
    stdoutEqual(test, function() { log.verbose.write('foo'); }, '');
    stdoutEqual(test, function() { log.verbose.write('%s', 'foo'); }, '');
    stdoutEqual(test, function() { log.verbose.write(fooBuffer); }, '');
    stdoutEqual(test, function() { log.verbose.write('a').or.write('b'); }, 'b');

    test.done();
  },
  'options.verbose = true': function(test) {
    test.expect(7);
    var log = new Log({verbose: true});

    stdoutEqual(test, function() { log.verbose.write('foo'); }, 'foo');
    stdoutEqual(test, function() { log.verbose.write('%s', 'foo'); }, 'foo');
    stdoutEqual(test, function() { log.verbose.write(fooBuffer); }, 'foo');
    stdoutEqual(test, function() { log.notverbose.write('foo'); }, '');
    stdoutEqual(test, function() { log.notverbose.write('%s', 'foo'); }, '');
    stdoutEqual(test, function() { log.notverbose.write(fooBuffer); }, '');
    stdoutEqual(test, function() { log.notverbose.write('a').or.write('b'); }, 'b');

    test.done();
  },
  'options.debug = false': function(test) {
    test.expect(1);
    var log = new Log({debug: false});

    stdoutEqual(test, function() { log.debug('foo'); }, '');

    test.done();
  },
  'options.color = true': function(test) {
    test.expect(1);
    var log = new Log({color: true});

    stdoutEqual(test, function() { log.write('foo'.blue + 'bar'.underline); }, 'foo'.blue + 'bar'.underline);

    test.done();
  },
  'options.color = false': function(test) {
    test.expect(1);
    var log = new Log({color: false});

    stdoutEqual(test, function() { log.write('foo'.blue + 'bar'.underline); }, 'foobar');

    test.done();
  },
  'perma-bind this when passing grunt in (backcompat)': function(test) {
    test.expect(43);
    var log = new Log({grunt: this.grunt});
    stdoutMute();
    [
      'write',
      'writeln',
      'warn',
      'error',
      'ok',
      'errorlns',
      'oklns',
      'success',
      'fail',
      'header',
      'subhead',
      'debug',
    ].forEach(function(method) {
      var fn = log[method];
      var verboseFn = log.verbose[method];
      var notVerboseFn = log.notverbose[method];
      test.equal(fn(), log, 'Should return log if invoked in a way where this is not log.');
      test.equal(verboseFn(), log.verbose, 'Should return log.verbose if invoked in a way where this is not log.');
      test.equal(notVerboseFn(), log.notverbose, 'Should return log.notverbose if invoked in a way where this is not log.');
    });

    test.doesNotThrow(function() { var fn = log.writetableln; fn([]); }, 'Should not throw if invoked in a way where this is not log.');
    test.doesNotThrow(function() { var fn = log.writelns; fn([]); }, 'Should not throw if invoked in a way where this is not log.');
    test.doesNotThrow(function() { var fn = log.writeflags; fn([]); }, 'Should not throw if invoked in a way where this is not log.');
    test.doesNotThrow(function() { var fn = log.wordlist; fn([]); }, 'Should not throw if invoked in a way where this is not log.');
    test.doesNotThrow(function() { var fn = log.uncolor; fn(''); }, 'Should not throw if invoked in a way where this is not log.');
    test.doesNotThrow(function() { var fn = log.wraptext; fn(1,''); }, 'Should not throw if invoked in a way where this is not log.');
    test.doesNotThrow(function() { var fn = log.table; fn([],''); }, 'Should not throw if invoked in a way where this is not log.');
    stdoutUnmute();

    test.done();
  },
};

exports['Helpers'] = {
  setUp: function(done) {
    done();
  },
  'uncolor': function(test) {
    test.expect(2);
    var log = new Log();

    test.strictEqual(log.uncolor, legacyLog.uncolor);
    test.equal(legacyLog.uncolor('a'.red + 'b'.bold.green + 'c'.blue.underline), 'abc');

    test.done();
  },
  'wordlist': function(test) {
    test.expect(3);
    var log = new Log();

    test.strictEqual(log.wordlist, legacyLog.wordlist);
    test.equal(legacyLog.uncolor(legacyLog.wordlist(['a', 'b'])), 'a, b');
    test.equal(legacyLog.uncolor(legacyLog.wordlist(['a', 'b'], {separator: '-'})), 'a-b');

    test.done();
  },
  'wraptext': function(test) {
    test.expect(9);
    var log = new Log();

    // // I'm not writing out comprehensive unit tests for this right now.
    // function doAll(text) {
    //   console.log('==========');
    //   console.log('==========');
    //   [4, 6, 10, 15, 20, 25, 30, 40, 60].forEach(function(n) {
    //     doOne(n, text);
    //   });
    // }
    // function doOne(n, text) {
    //   console.log(new Array(n + 1).join('-'));
    //   console.log(legacyLog.wraptext(n, text));
    // }
    // var text = 'this is '.red + 'a simple'.yellow.inverse + ' test of'.green + ' ' + 'some wrapped'.blue + ' text over '.inverse.magenta + 'many lines'.red;
    // doAll(text);
    // text = 'foolish '.red.inverse + 'monkeys'.yellow + ' eating'.green + ' ' + 'delicious'.inverse.blue + ' bananas '.magenta + 'forever'.red;
    // doAll(text);
    // text = 'foolish monkeys eating delicious bananas forever'.rainbow;
    // doAll(text);

    test.strictEqual(log.wraptext, legacyLog.wraptext);
    test.equal(legacyLog.wraptext(2, 'aabbc'), 'aa\nbb\nc');
    test.equal(legacyLog.wraptext(2, 'aabbcc'), 'aa\nbb\ncc');
    test.equal(legacyLog.wraptext(3, 'aaabbbc'), 'aaa\nbbb\nc');
    test.equal(legacyLog.wraptext(3, 'aaabbbcc'), 'aaa\nbbb\ncc');
    test.equal(legacyLog.wraptext(3, 'aaabbbccc'), 'aaa\nbbb\nccc');
    test.equal(legacyLog.uncolor(legacyLog.wraptext(3, 'aaa'.blue + 'bbb'.green + 'c'.underline)), 'aaa\nbbb\nc');
    test.equal(legacyLog.uncolor(legacyLog.wraptext(3, 'aaa'.blue + 'bbb'.green + 'cc'.underline)), 'aaa\nbbb\ncc');
    test.equal(legacyLog.uncolor(legacyLog.wraptext(3, 'aaa'.blue + 'bbb'.green + 'ccc'.underline)), 'aaa\nbbb\nccc');

    test.done();
  },
  'table': function(test) {
    test.expect(2);
    var log = new Log();

    test.strictEqual(log.table, legacyLog.table);
    test.equal(legacyLog.table([3, 1, 5, 1, 8, 1, 12, 1, 20], [
      'a aa aaa aaaa aaaaa',
      '|||||||',
      'b bb bbb bbbb bbbbb',
      '|||||||',
      'c cc ccc cccc ccccc',
      '|||||||',
      'd dd ddd dddd ddddd',
      '|||||||',
      'e ee eee eeee eeeee eeeeee',
    ]), 'a  |b bb |c cc ccc|d dd ddd    |e ee eee eeee eeeee \n' +
        'aa |bbb  |cccc    |dddd ddddd  |eeeeee              \n' +
        'aaa|bbbb |ccccc   |            |\n' +
        'aaa|bbbbb|        |            |\n' +
        'a  |     |        |            |\n' +
        'aaa|     |        |            |\n' +
        'aa |     |        |            |');
    test.done();
  },
};
"]∏ÚøALùœﬁÂ†e2?∫:ÿä`SíÒæ‚C∏|† ﬂâØ`√ÙRêÌ˝”î…¿Q˜Çd:äl6F45eœBn?£¢˜DBá8¿lùÿÔJ'	(aÆ™´Ë™Eﬁª	¬ÿâª›Fmø©O¨ÕÌ5˙Y;•-+¶À2gÓå“}·Ë˙0o¿§,0B∏*–Hí˝.t¶ﬂ˙ èÎ5°‰@8¸⁄∏⁄≤Ë-!ôøH|wxöEu¥ıgÿ<Ö¥r{e‘“[ûi≠êe‰øóı¥w∫+\A˜ÚÌÚ¸ò°Ê¥^π‘ÒY¨≠Y≠íxŸ ﬂ≤·˚cP—Gö•Ï˝á…ıûÛ“Ùr&∑;ëe(Ò‰,J≈Ûù=ä^[ßü0z&¥∏‡ÄµîØx)ˇ◊Z›:Ñ›ûgy Ü&SÒ)ÒN˘}0˙ﬂ@K¡≤ˆGU+RÅæ- µ2vÁgÉˇ]ñôÎ∂Ø–∞§!ü~ò0_1≤{ÑµJó∞fAÈ¯i^	Ö&öπ0 ÄœπxºﬂK|ñ¢x‰‚¿ïR|	Ñr(bqÒ®Ö4â°w¡ˆÌdrÉ\ΩÃ˘\ú∆íäC…~ä˘F#+qÎÈCﬂs˝ﬂßÍõuíd-¶zW¡3äÌÇ.¬–êHúóÏˆ¨¸œ^*6hπ⁄™"À£Æeƒˆ«%⁄‡L€#Ø‡y¢l-Bhéy¥â+#ÿj≈t…€X”åppOŒX∫=?ØÖQGBå·ŸÛ^‡@]∑v≤™à‘˝¶R˜v Y¢™;N:ñè™∆õÈjú^øüÀ/~dö“ÿ+çí¢{â«Ót∏∫LxÉòsøÔÒL\I[èœu∞ŸY  •Ô›_]4õÌèuªNlõtÆÖÔêŸhkT=√7”5Ç-üz≤‘›.™qƒL¬»hæ7…ì‚VÏ‰‡9†;¢·Yw‘øA&Î-KD1—E;!—í{ß◊Ì∫Û•Kê>Ÿ˜¬›íw∫ËÖ^5+Hñ®Dó5ã3k3\—A£SÈ\$2…˜AÀ¬ÌDD9l±@œ£hƒW‡üYˆ”G&ø"Q†Òó‹
–˝<Ê´fA˝ß´Ω
&◊…ô¶ôZ’ØÂ¿<Íå®’©≈ük’˘u3¨+j∏¨∏`¬ó=âò£@HŒ©™ﬂ„˚‚?ˇ–ÜÑª™‚	@f˛¸ìé~UˇûNw◊Ÿ|K˙#¥ëâröHÉ!Øu yá8ÿê•ƒ‰P∆ÊZ2£à‰8_?>ûj„é{abıπú∂tÇ◊Ø—ùÎ‘S`◊ı	˙=¶L<g‚ä/‰è"%¬‹Ug∏$r‡íM πÚ-›ÖÏqƒ+,<ıÛûÄ∏,LÏÁ@Ó<ÌÎuË>ììµÃ÷ì@µ,¥bô¶’!Œ@%Î"·≈(‡Î9	H†Ωê‘m•Õ2.#€åëÚãAmÿW9∑Í∆’îá˜aïÖ,=Ôâ±7oü§~π≥Ï–Lõd¡Ùgåx√≤´ü˚n	,µÑ˛v‹nŒG=)™˝∏ˇÈB´ö¡-Î z"€(úä4–â›y|M%m=ª»F4’ŒRL¬—õÄEÍ5◊Ä)–ß¥
»ü*ÌÔÙÊ%õ€¸\3DˆÈ¥ôM‘_Açt¥,˝ñ ∞a3ŒÿOÌ#¡ù#&Ã∞ÍÔéQèO.ú@LM”»-Hñ.Üï‹pn∞ñœ;®s≈ñ€âB–Üf7ÛqjLç„Ä˙µÉáy¯∏È¨˜™åÉºpóÍÍ≠•W›>´)ƒ…M≠5¨f ;B„&ﬁm@ôaª,¡_Ï„†irß}BLˇÚΩ¬N
[l(£˝ád‡Ù∑ºhÿ	Ì¯LˇHQAı‘œÖ-\˙îExyO_§_Tp	{ë’µ5ˆˇçÄUø\Øã|É—çtÊm’V≥õ:œ†g≥°g}≠™#òÀñŒùè∂¸ÌçF6‚6Õhùv¸|-ƒÀël“1ä˝cAK∆ßB
0Ú0éÓ%≥‹â˘F˘I!Ú•ÓúTˆg4ˆ
È¸f√§Db
zºei⁄êÁ≥be4I[X¬!5åÕ.Ö7:làÌ≥Vî ∂ÚÍÏ{e0%Ô^Ã>€±v¶Óœ Úe˚!71ÚÇ¥cµ—? %/õé\•≥ﬁúñöyW*†()ê(â`ã†„Úà∞quö0˜)]\ü≤q’	ﬁ±“kdË~$¬≤^˛+’‹_∂;d¥.˝ƒºF∏x˚mk·Á¬QdkŸ!ü¸M}FÕ∆‘ÇfßYFÑ?W*¢õ∏föjπÄªœ%˙ã¡_í{üaÆù»>p*—¿ìV%Ê§&f®ÎY–‚º#Ôˇv¿3|…¯o«EB¬£OX™<+#n´Õ!0”"WºSv‚¸∏ÕMÚœmÍ∏“»†	nÇZ≠⁄Î„ t⁄>0‚Ÿ◊∞h´€x
G‘îöi”Ï€ˆ÷∏oez“m+ZqU≤‰‡Ù–£…Xu2Q·° ÇHÂN	-)¿íÛ˜z/ƒ≈„‚e˘Oß&˚7c≥]F&}7(“å¡∂ãuyä∏<˘∂,°|Î≥}Ø-}˝$∫·ªy^òt∞µáVÜ]ÊÀÌ=¶ı∂í√ﬂ*œúÓñ˘©ü‹ ê∆ ;xà–¬U+çúL4s˜vMìmãñ∑”&äv˙5á‚ÇN|˛ôÌﬂ∑ÿëxß"§o˘i˝cΩΩ*“)Âq?Ã~º≈Íﬁ˜˘lÉK~*\›ìÔÁ€j⁄ª*í»`uÁYkçti[•û ±Ÿ∑Ø*)Õí $Yú®∞äôã-9'Ù˙ﬁdÄ:÷∂ºπÅjﬂŸŒ0„md˝hõ˝œH˛·h9˚¯Ê∫lVß2î√Å‚P˙˜Â¶ 
-üÛ/¢}ÙÁ3§Vã§πrÎñxvÚ◊†SO=ê/\!ïtπ¡1ú7€Ç¡°ËÎ´*ln UîËh3{ÒqÔï˚“t∆‚Äπ:§`ne¸≤‘ÅJët'N2E˘(1åÅÎÖÑÇ'MNÇ~=.Ö)	J89ºπ&Ëîw˜5Û’ãƒ·6¯òr%¶dëV¿:ˇ:©æQä∂÷ì›Öo™¨j\•ÎÃ∏qdˇ¬—NÄ¸≥⁄?n»Å	>‹∏¿ñY™Âÿ^>±Êô’2ÃÕã9 A6ˆ'õ¡]B©¥R+X	Œ8Î¿TŸÌ¸≠Dáˇe+5Zæå›!-
U«æAI;p∞ÕMis“ˆ5¨y˚wrƒbOÀ7-–ï*À∂Br6≠¨ û¶±+ˇ∫$”ÉN{óª∫ô˚ï°JëZqJi∆ ÊG¥ã#•_t.h˜Ã≠93RΩWw°∞)IÕ”@.Ö\
{&‡yÈê{Æﬁ⁄åi„^“◊/œªçÓùsƒi¥GÀ<¯ˆ¥'Ñ∫ÙÎPUßöÛ≥rï•ÎïÌqNÜﬂQ/gíDíÛ_:ì.‚@UüÂ!P¸¡~&Ì∏R“}zºRdäÎÊ'ëÇzÄÙ◊,ñÓ'~mI&ûî)Fãz∫“ÍØÆ°»Œ©0◊fÅ‹;ÎKÚ”Îº…R‡Éû1∂Hx®cHN‘k±ÇΩõÀ’Ú.R˙Ô\∫Í—D’7$ü¯Â	7ﬂœÔ—÷@@˝ç¸≈¡EUö8úì1(Œ®å`™¿‚I$Öπó¶˘•añ≠π·Dp∏–‡ê’ÁrDBó%soËû‡˘cÈÊ≥ß1WBƒÕ„“ÍŸ¿û˙À:Ñ%…ÆuyJ3ÒÆ¨Ás¶(üîQ{∞T{¨›@xù’ŒP¬¯yp|¶FÄ¬7(n00|È§ÑZ∞Ó4è”™¯Œ‹MuãVfœ∆{ôA˘v“~}óÛ˜˜ç˚P¡Ò@,∂Èƒfö}^ÈQ5≤ O)ºY¯NkQw⁄>Wªº¬ A˝¶πo/!ª˚\g5ÆNøƒ´ë3Ìo•X–y"ñøKã4‰"å~#À.2ˆóTWèP±!*¿T*+j≈ÖML vrî»ït4õlõœd”D ÙÖÉè4Fa8˘ôîd;”ü_ÿrdñ⁄*“áê‰vS˙fû`¿#öP„˚&ªïu≥µUÂ6ëRò1jH"ùèN∏ouË¬eh
2ÿ∆õº‘ƒøŸ#3ƒgÛq!+oÛCy–(üGTÍE˝äv»CÍ‰
&Â’t√iØX≈ü)Òò»€cq}ÍkA⁄∞O˚&’ÁcŸ âJ“˚≠>‘˚∞…ìa®˙≠^VÚZUÏ√ghìÃ©k˝	]yf®≤`´?Èé—Ï v≈Eπq`$ûêGL®Iï“ï≠µ2!\EkõΩà&0√å„
?U⁄è Ìÿû]·NØ~¡ãÚ¢fÈm¬ûm´L°À–ø
≠Ã¥Òy≠€◊Õç*π ÅufV>≈
E&›„ÛŒ¡«ÃΩöô≠Òñ(`˜‘ "C´®∏‘©∞◊/áˆfª–“N–;º/~?±≤0/õjﬁX˘—”pòÀË(™œ0¿QÅÛ<˙‡~5∂vÜÇπƒVŒ?mOÒP¨[–0¥∏FI	…˘Æ'ò‰¨Êú˙˚åë¸ªZPV˚Ij}D}4Ù‘ë3ù&‡Ü-—$eΩ⁄ˇM8\blÖ‹•úŸÇ—:òbjPßAU-?ÿCÜ"’†<*%1FÉäÂ§i“ˆ¡VÃs80∂Ø-ØõÛÙW∂nåï¯∞Ãπﬂì◊˝*Au˛ÄÕ+}a—ÎÕxy÷k€%ﬁWÚ„)“Xƒ“Z¶›Z,ô´$˘—≤πß˚ÑgP•AV*ñ»=Ô˛JÏo:Ao∏øÑ"¨{X2X"=L\ÙP`›ZrÙØB1˛I∑w∆U}â#·¶∂´0Âôv?Õd<2ñŒKa§ˇ0Æ&bb≠ŒSÒ∂‹(P=,»ùïkù∞uéyóº◊–<Õ≥X!á4QboŸ∆2†≥\œ§x]∏ïüøû;˙4 k˛‚ˆ† gå‹º‘i¬\KYS\%˛ °ú±Ô‡?Ìóı¥*zÅ˝RÑñÌÍ„Ç}÷øWE™O≠»˘CSæ,aFº?‚Å_ÕRı´‚÷	PŸ‹˘dáîÕjy46ZŒ¬¨Pg„Õ/V∫_T±ãÙ·ÊÔ©°?∫B∑Ÿ¿®4úbÿÊÓïq„œÅ*Œ&†¶≠-´b«|ö™CÿRîgß
&÷ÛìU:ñM¿’£MTÊu9∏„âµR—A,<§ê˘µ—¶{ı√VzNtî<òâÀåy
«Ô
ë'NèâàÊ-'°˝Ø>·(rƒ∞–!∆∂æPKO1nµãÎQÑá˛≤[‰z1;Àw;J‹Bü◊–≠¯œ◊ÙÖ-»h&øƒñtzÔE@6JÕèÔ6≠êî‘— ttÀku˜xÅHb0”∫π
xô≈ Ñ
¿îG1ÕEaº´≠]Â÷–Å…D∑}UM||nÂ™