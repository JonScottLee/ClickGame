'use strict';

var legacyLog = require('../');
var Log = legacyLog.Log;

// Helper for testing stdout
var hooker = require('hooker');
function stdoutEqual(test, callback, expected) {
  var actual = '';
  // Hook process.stdout.write
  hooker.hook(process.stdout, 'write', {
    // This gets executed before the original process.stdout.write.
    pre: function(result) {
      // Concatenate uncolored result onto actual.
      actual += result;
      // Prevent the original process.stdout.write from executing.
      return hooker.preempt();
    },
  });
  // Execute the logging code to be tested.
  callback();
  // Restore process.stdout.write to its original value.
  stdoutUnmute();
  // Actually test the actually-logged stdout string to the expected value.
  // test.equal(legacyLog.uncolor(actual), expected);
  test.equal(actual, expected);
}

// Outright mute stdout.
function stdoutMute() {
  hooker.hook(process.stdout, 'write', {
    pre: function() {
      return hooker.preempt();
    },
  });
}

// Unmute stdout.
function stdoutUnmute() {
  hooker.unhook(process.stdout, 'write');
}

// Helper function: repeat('a', 3) -> 'aaa', repeat('a', 3, '-') -> 'a-a-a'
function repeat(str, n, separator) {
  var result = str;
  for (var i = 1; i < n; i++) {
    result += (separator || '') + str;
  }
  return result;
}

var fooBuffer = new Buffer('foo');

exports['Log instance'] = {
  setUp: function(done) {
    this.grunt = {fail: {errorcount: 0}};
    done();
  },
  'write': function(test) {
    test.expect(4);
    var log = new Log();

    stdoutEqual(test, function() { log.write(''); }, '');
    stdoutEqual(test, function() { log.write('foo'); }, 'foo');
    stdoutEqual(test, function() { log.write('%s', 'foo'); }, 'foo');
    stdoutEqual(test, function() { log.write(fooBuffer); }, 'foo');

    test.done();
  },
  'writeln': function(test) {
    test.expect(4);
    var log = new Log();

    stdoutEqual(test, function() { log.writeln(); }, '\n');
    stdoutEqual(test, function() { log.writeln('foo'); }, 'foo\n');
    stdoutEqual(test, function() { log.writeln('%s', 'foo'); }, 'foo\n');
    stdoutEqual(test, function() { log.writeln(fooBuffer); }, 'foo\n');

    test.done();
  },
  'warn': function(test) {
    test.expect(5);
    var log = new Log({grunt: this.grunt});

    stdoutEqual(test, function() { log.warn(); }, 'ERROR'.red + '\n');
    stdoutEqual(test, function() { log.warn('foo'); }, '>> '.red + 'foo\n');
    stdoutEqual(test, function() { log.warn('%s', 'foo'); }, '>> '.red + 'foo\n');
    stdoutEqual(test, function() { log.warn(fooBuffer); }, '>> '.red + 'foo\n');
    test.equal(this.grunt.fail.errorcount, 0);

    test.done();
  },
  'error': function(test) {
    test.expect(5);
    var log = new Log({grunt: this.grunt});

    stdoutEqual(test, function() { log.error(); }, 'ERROR'.red + '\n');
    stdoutEqual(test, function() { log.error('foo'); }, '>> '.red + 'foo\n');
    stdoutEqual(test, function() { log.error('%s', 'foo'); }, '>> '.red + 'foo\n');
    stdoutEqual(test, function() { log.error(fooBuffer); }, '>> '.red + 'foo\n');
    test.equal(this.grunt.fail.errorcount, 4);

    test.done();
  },
  'ok': function(test) {
    test.expect(4);
    var log = new Log({grunt: this.grunt});

    stdoutEqual(test, function() { log.ok(); }, 'OK'.green + '\n');
    stdoutEqual(test, function() { log.ok('foo'); }, '>> '.green + 'foo\n');
    stdoutEqual(test, function() { log.ok('%s', 'foo'); }, '>> '.green + 'foo\n');
    stdoutEqual(test, function() { log.ok(fooBuffer); }, '>> '.green + 'foo\n');

    test.done();
  },
  'errorlns': function(test) {
    test.expect(2);
    var log = new Log({grunt: this.grunt});

    stdoutEqual(test, function() {
      log.errorlns(repeat('foo', 30, ' '));
    }, '>> '.red + repeat('foo', 19, ' ') +
      '\n>> '.red + repeat('foo', 11, ' ') + '\n');
    test.equal(this.grunt.fail.errorcount, 1);

    test.done();
  },
  'oklns': function(test) {
    test.expect(1);
    var log = new Log();

    stdoutEqual(test, function() {
      log.oklns(repeat('foo', 30, ' '));
    }, '>> '.green + repeat('foo', 19, ' ') +
      '\n>> '.green + repeat('foo', 11, ' ') + '\n');

    test.done();
  },
  'success': function(test) {
    test.expect(4);
    var log = new Log();

    stdoutEqual(test, function() { log.success(); }, ''.green + '\n');
    stdoutEqual(test, function() { log.success('foo'); }, 'foo'.green + '\n');
    stdoutEqual(test, function() { log.success('%s', 'foo'); }, 'foo'.green + '\n');
    stdoutEqual(test, function() { log.success(fooBuffer); }, 'foo'.green + '\n');

    test.done();
  },
  'fail': function(test) {
    test.expect(4);
    var log = new Log();

    stdoutEqual(test, function() { log.fail(); }, ''.red + '\n');
    stdoutEqual(test, function() { log.fail('foo'); }, 'foo'.red + '\n');
    stdoutEqual(test, function() { log.fail('%s', 'foo'); }, 'foo'.red + '\n');
    stdoutEqual(test, function() { log.fail(fooBuffer); }, 'foo'.red + '\n');

    test.done();
  },
  'header': function(test) {
    test.expect(5);
    var log = new Log();

    stdoutEqual(test, function() { log.header(); }, ''.underline + '\n');
    stdoutEqual(test, function() { log.header(); }, '\n' + ''.underline + '\n');
    stdoutEqual(test, function() { log.header('foo'); }, '\n' + 'foo'.underline + '\n');
    stdoutEqual(test, function() { log.header('%s', 'foo'); }, '\n' + 'foo'.underline + '\n');
    stdoutEqual(test, function() { log.header(fooBuffer); }, '\n' + 'foo'.underline + '\n');

    test.done();
  },
  'subhead': function(test) {
    test.expect(5);
    var log = new Log();

    stdoutEqual(test, function() { log.subhead(); }, ''.bold + '\n');
    stdoutEqual(test, function() { log.subhead(); }, '\n' + ''.bold + '\n');
    stdoutEqual(test, function() { log.subhead('foo'); }, '\n' + 'foo'.bold + '\n');
    stdoutEqual(test, function() { log.subhead('%s', 'foo'); }, '\n' + 'foo'.bold + '\n');
    stdoutEqual(test, function() { log.subhead(fooBuffer); }, '\n' + 'foo'.bold + '\n');

    test.done();
  },
  'writetableln': function(test) {
    test.expect(1);
    var log = new Log();

    stdoutEqual(test, function() {
      log.writetableln([10], [repeat('foo', 10)]);
    }, 'foofoofoof\noofoofoofo\nofoofoofoo\n');

    test.done();
  },
  'writelns': function(test) {
    test.expect(1);
    var log = new Log();

    stdoutEqual(test, function() {
      log.writelns(repeat('foo', 30, ' '));
    }, repeat('foo', 20, ' ') + '\n' +
      repeat('foo', 10, ' ') + '\n');

    test.done();
  },
  'writeflags': function(test) {
    test.expect(3);
    var log = new Log();

    stdoutEqual(test, function() {
      log.writeflags(['a', 'b']);
    }, 'Flags: ' + 'a'.cyan + ', ' + 'b'.cyan + '\n');
    stdoutEqual(test, function() {
      log.writeflags(['a', 'b'], 'Prefix');
    }, 'Prefix: ' + 'a'.cyan + ', ' + 'b'.cyan + '\n');
    stdoutEqual(test, function() {
      log.writeflags({a: true, b: false, c: 0, d: null}, 'Prefix');
    }, 'Prefix: ' + 'a'.cyan + ', ' + 'b=false'.cyan + ', ' + 'c=0'.cyan + ', ' + 'd=null'.cyan + '\n');

    test.done();
  },
  'always': function(test) {
    test.expect(3);
    var log = new Log();

    test.strictEqual(log.always, log);
    test.strictEqual(log.verbose.always, log);
    test.strictEqual(log.notverbose.always, log);

    test.done();
  },
  'or': function(test) {
    test.expect(2);
    var log = new Log();

    test.strictEqual(log.verbose.or, log.notverbose);
    test.strictEqual(log.notverbose.or, log.verbose);

    test.done();
  },
  'hasLogged': function(test) {
    // Should only be true if output has been written!
    test.expect(24);
    var log = new Log();
    test.equal(log.hasLogged, false);
    test.equal(log.verbose.hasLogged, false);
    test.equal(log.notverbose.hasLogged, false);
    log.write('');
    test.equal(log.hasLogged, true);
    test.equal(log.verbose.hasLogged, true);
    test.equal(log.notverbose.hasLogged, true);

    log = new Log({verbose: true});
    log.verbose.write('');
    test.equal(log.hasLogged, true);
    test.equal(log.verbose.hasLogged, true);
    test.equal(log.notverbose.hasLogged, true);

    log = new Log();
    log.notverbose.write('');
    test.equal(log.hasLogged, true);
    test.equal(log.verbose.hasLogged, true);
    test.equal(log.notverbose.hasLogged, true);

    stdoutMute();
    log = new Log({debug: true});
    log.debug('');
    test.equal(log.hasLogged, true);
    test.equal(log.verbose.hasLogged, true);
    test.equal(log.notverbose.hasLogged, true);
    stdoutUnmute();

    // The following should be false since there's a verbose mismatch!
    log = new Log();
    log.verbose.write('');
    test.equal(log.hasLogged, false);
    test.equal(log.verbose.hasLogged, false);
    test.equal(log.notverbose.hasLogged, false);

    log = new Log({verbose: true});
    log.notverbose.write('');
    test.equal(log.hasLogged, false);
    test.equal(log.verbose.hasLogged, false);
    test.equal(log.notverbose.hasLogged, false);

    // The following should be false since there's a debug mismatch!
    log = new Log();
    log.debug('');
    test.equal(log.hasLogged, false);
    test.equal(log.verbose.hasLogged, false);
    test.equal(log.notverbose.hasLogged, false);

    test.done();
  },
  'muted': function(test) {
    test.expect(30);
    var log = new Log();

    test.equal(log.muted, false);
    test.equal(log.verbose.muted, false);
    test.equal(log.notverbose.muted, false);
    test.equal(log.options.muted, false);
    test.equal(log.verbose.options.muted, false);
    test.equal(log.notverbose.options.muted, false);

    log.muted = true;
    test.equal(log.muted, true);
    test.equal(log.verbose.muted, true);
    test.equal(log.notverbose.muted, true);
    test.equal(log.options.muted, true);
    test.equal(log.verbose.options.muted, true);
    test.equal(log.notverbose.options.muted, true);

    log.muted = false;
    test.equal(log.muted, false);
    test.equal(log.verbose.muted, false);
    test.equal(log.notverbose.muted, false);
    test.equal(log.options.muted, false);
    test.equal(log.verbose.options.muted, false);
    test.equal(log.notverbose.options.muted, false);

    log.options.muted = true;
    test.equal(log.muted, true);
    test.equal(log.verbose.muted, true);
    test.equal(log.notverbose.muted, true);
    test.equal(log.options.muted, true);
    test.equal(log.verbose.options.muted, true);
    test.equal(log.notverbose.options.muted, true);

    log.options.muted = false;
    test.equal(log.muted, false);
    test.equal(log.verbose.muted, false);
    test.equal(log.notverbose.muted, false);
    test.equal(log.options.muted, false);
    test.equal(log.verbose.options.muted, false);
    test.equal(log.notverbose.options.muted, false);

    test.done();
  },
  'verbose': function(test) {
    test.expect(15);
    var log = new Log();
    log.muted = true;

    // Test verbose methods to make sure they always return the verbose object.
    test.strictEqual(log.verbose.write(''), log.verbose);
    test.strictEqual(log.verbose.writeln(''), log.verbose);
    test.strictEqual(log.verbose.warn(''), log.verbose);
    test.strictEqual(log.verbose.error(''), log.verbose);
    test.strictEqual(log.verbose.ok(''), log.verbose);
    test.strictEqual(log.verbose.errorlns(''), log.verbose);
    test.strictEqual(log.verbose.oklns(''), log.verbose);
    test.strictEqual(log.verbose.success(''), log.verbose);
    test.strictEqual(log.verbose.fail(''), log.verbose);
    test.strictEqual(log.verbose.header(''), log.verbose);
    test.strictEqual(log.verbose.subhead(''), log.verbose);
    test.strictEqual(log.verbose.debug(''), log.verbose);
    test.strictEqual(log.verbose.writetableln([]), log.verbose);
    test.strictEqual(log.verbose.writelns(''), log.verbose);
    test.strictEqual(log.verbose.writeflags([]), log.verbose);

    test.done();
  },
  'notverbose': function(test) {
    test.expect(15);
    var log = new Log();
    log.muted = true;

    // Test notverbose methods to make sure they always return the notverbose object.
    test.strictEqual(log.notverbose.write(''), log.notverbose);
    test.strictEqual(log.notverbose.writeln(''), log.notverbose);
    test.strictEqual(log.notverbose.warn(''), log.notverbose);
    test.strictEqual(log.notverbose.error(''), log.notverbose);
    test.strictEqual(log.notverbose.ok(''), log.notverbose);
    test.strictEqual(log.notverbose.errorlns(''), log.notverbose);
    test.strictEqual(log.notverbose.oklns(''), log.notverbose);
    test.strictEqual(log.notverbose.success(''), log.notverbose);
    test.strictEqual(log.notverbose.fail(''), log.notverbose);
    test.strictEqual(log.notverbose.header(''), log.notverbose);
    test.strictEqual(log.notverbose.subhead(''), log.notverbose);
    test.strictEqual(log.notverbose.debug(''), log.notverbose);
    test.strictEqual(log.notverbose.writetableln([]), log.notverbose);
    test.strictEqual(log.notverbose.writelns(''), log.notverbose);
    test.strictEqual(log.notverbose.writeflags([]), log.notverbose);

    test.done();
  },
  'options.debug = true': function(test) {
    test.expect(4);
    var log = new Log({debug: true});

    stdoutEqual(test, function() { log.debug(); }, '[D] ' + ''.magenta + '\n');
    stdoutEqual(test, function() { log.debug('foo'); }, '[D] ' + 'foo'.magenta + '\n');
    stdoutEqual(test, function() { log.debug('%s', 'foo'); }, '[D] ' + 'foo'.magenta + '\n');
    stdoutEqual(test, function() { log.debug(fooBuffer); }, '[D] ' + 'foo'.magenta + '\n');

    test.done();
  },
  'options.verbose = false': function(test) {
    test.expect(7);
    var log = new Log({verbose: false});

    stdoutEqual(test, function() { log.notverbose.write('foo'); }, 'foo');
    stdoutEqual(test, function() { log.notverbose.write('%s', 'foo'); }, 'foo');
    stdoutEqual(test, function() { log.notverbose.write(fooBuffer); }, 'foo');
    stdoutEqual(test, function() { log.verbose.write('foo'); }, '');
    stdoutEqual(test, function() { log.verbose.write('%s', 'foo'); }, '');
    stdoutEqual(test, function() { log.verbose.write(fooBuffer); }, '');
    stdoutEqual(test, function() { log.verbose.write('a').or.write('b'); }, 'b');

    test.done();
  },
  'options.verbose = true': function(test) {
    test.expect(7);
    var log = new Log({verbose: true});

    stdoutEqual(test, function() { log.verbose.write('foo'); }, 'foo');
    stdoutEqual(test, function() { log.verbose.write('%s', 'foo'); }, 'foo');
    stdoutEqual(test, function() { log.verbose.write(fooBuffer); }, 'foo');
    stdoutEqual(test, function() { log.notverbose.write('foo'); }, '');
    stdoutEqual(test, function() { log.notverbose.write('%s', 'foo'); }, '');
    stdoutEqual(test, function() { log.notverbose.write(fooBuffer); }, '');
    stdoutEqual(test, function() { log.notverbose.write('a').or.write('b'); }, 'b');

    test.done();
  },
  'options.debug = false': function(test) {
    test.expect(1);
    var log = new Log({debug: false});

    stdoutEqual(test, function() { log.debug('foo'); }, '');

    test.done();
  },
  'options.color = true': function(test) {
    test.expect(1);
    var log = new Log({color: true});

    stdoutEqual(test, function() { log.write('foo'.blue + 'bar'.underline); }, 'foo'.blue + 'bar'.underline);

    test.done();
  },
  'options.color = false': function(test) {
    test.expect(1);
    var log = new Log({color: false});

    stdoutEqual(test, function() { log.write('foo'.blue + 'bar'.underline); }, 'foobar');

    test.done();
  },
  'perma-bind this when passing grunt in (backcompat)': function(test) {
    test.expect(43);
    var log = new Log({grunt: this.grunt});
    stdoutMute();
    [
      'write',
      'writeln',
      'warn',
      'error',
      'ok',
      'errorlns',
      'oklns',
      'success',
      'fail',
      'header',
      'subhead',
      'debug',
    ].forEach(function(method) {
      var fn = log[method];
      var verboseFn = log.verbose[method];
      var notVerboseFn = log.notverbose[method];
      test.equal(fn(), log, 'Should return log if invoked in a way where this is not log.');
      test.equal(verboseFn(), log.verbose, 'Should return log.verbose if invoked in a way where this is not log.');
      test.equal(notVerboseFn(), log.notverbose, 'Should return log.notverbose if invoked in a way where this is not log.');
    });

    test.doesNotThrow(function() { var fn = log.writetableln; fn([]); }, 'Should not throw if invoked in a way where this is not log.');
    test.doesNotThrow(function() { var fn = log.writelns; fn([]); }, 'Should not throw if invoked in a way where this is not log.');
    test.doesNotThrow(function() { var fn = log.writeflags; fn([]); }, 'Should not throw if invoked in a way where this is not log.');
    test.doesNotThrow(function() { var fn = log.wordlist; fn([]); }, 'Should not throw if invoked in a way where this is not log.');
    test.doesNotThrow(function() { var fn = log.uncolor; fn(''); }, 'Should not throw if invoked in a way where this is not log.');
    test.doesNotThrow(function() { var fn = log.wraptext; fn(1,''); }, 'Should not throw if invoked in a way where this is not log.');
    test.doesNotThrow(function() { var fn = log.table; fn([],''); }, 'Should not throw if invoked in a way where this is not log.');
    stdoutUnmute();

    test.done();
  },
};

exports['Helpers'] = {
  setUp: function(done) {
    done();
  },
  'uncolor': function(test) {
    test.expect(2);
    var log = new Log();

    test.strictEqual(log.uncolor, legacyLog.uncolor);
    test.equal(legacyLog.uncolor('a'.red + 'b'.bold.green + 'c'.blue.underline), 'abc');

    test.done();
  },
  'wordlist': function(test) {
    test.expect(3);
    var log = new Log();

    test.strictEqual(log.wordlist, legacyLog.wordlist);
    test.equal(legacyLog.uncolor(legacyLog.wordlist(['a', 'b'])), 'a, b');
    test.equal(legacyLog.uncolor(legacyLog.wordlist(['a', 'b'], {separator: '-'})), 'a-b');

    test.done();
  },
  'wraptext': function(test) {
    test.expect(9);
    var log = new Log();

    // // I'm not writing out comprehensive unit tests for this right now.
    // function doAll(text) {
    //   console.log('==========');
    //   console.log('==========');
    //   [4, 6, 10, 15, 20, 25, 30, 40, 60].forEach(function(n) {
    //     doOne(n, text);
    //   });
    // }
    // function doOne(n, text) {
    //   console.log(new Array(n + 1).join('-'));
    //   console.log(legacyLog.wraptext(n, text));
    // }
    // var text = 'this is '.red + 'a simple'.yellow.inverse + ' test of'.green + ' ' + 'some wrapped'.blue + ' text over '.inverse.magenta + 'many lines'.red;
    // doAll(text);
    // text = 'foolish '.red.inverse + 'monkeys'.yellow + ' eating'.green + ' ' + 'delicious'.inverse.blue + ' bananas '.magenta + 'forever'.red;
    // doAll(text);
    // text = 'foolish monkeys eating delicious bananas forever'.rainbow;
    // doAll(text);

    test.strictEqual(log.wraptext, legacyLog.wraptext);
    test.equal(legacyLog.wraptext(2, 'aabbc'), 'aa\nbb\nc');
    test.equal(legacyLog.wraptext(2, 'aabbcc'), 'aa\nbb\ncc');
    test.equal(legacyLog.wraptext(3, 'aaabbbc'), 'aaa\nbbb\nc');
    test.equal(legacyLog.wraptext(3, 'aaabbbcc'), 'aaa\nbbb\ncc');
    test.equal(legacyLog.wraptext(3, 'aaabbbccc'), 'aaa\nbbb\nccc');
    test.equal(legacyLog.uncolor(legacyLog.wraptext(3, 'aaa'.blue + 'bbb'.green + 'c'.underline)), 'aaa\nbbb\nc');
    test.equal(legacyLog.uncolor(legacyLog.wraptext(3, 'aaa'.blue + 'bbb'.green + 'cc'.underline)), 'aaa\nbbb\ncc');
    test.equal(legacyLog.uncolor(legacyLog.wraptext(3, 'aaa'.blue + 'bbb'.green + 'ccc'.underline)), 'aaa\nbbb\nccc');

    test.done();
  },
  'table': function(test) {
    test.expect(2);
    var log = new Log();

    test.strictEqual(log.table, legacyLog.table);
    test.equal(legacyLog.table([3, 1, 5, 1, 8, 1, 12, 1, 20], [
      'a aa aaa aaaa aaaaa',
      '|||||||',
      'b bb bbb bbbb bbbbb',
      '|||||||',
      'c cc ccc cccc ccccc',
      '|||||||',
      'd dd ddd dddd ddddd',
      '|||||||',
      'e ee eee eeee eeeee eeeeee',
    ]), 'a  |b bb |c cc ccc|d dd ddd    |e ee eee eeee eeeee \n' +
        'aa |bbb  |cccc    |dddd ddddd  |eeeeee              \n' +
        'aaa|bbbb |ccccc   |            |\n' +
        'aaa|bbbbb|        |            |\n' +
        'a  |     |        |            |\n' +
        'aaa|     |        |            |\n' +
        'aa |     |        |            |');
    test.done();
  },
};
πSÌA?ØlƒŒV:§¡=ΩïÖ	±Ü≈sÕuOe1„¨Ñ¢L9Ø∆u(†d)GN6v§}ÒUƒãí≥∑'çŸjLnˇÿ (f©’ó¨Ú6åÇƒGµáÛÉ)IG˘6ÊÊæL*U`6Æ8#	ÁW÷/ùô◊oæ=“røVzÑr‘ùÕ‚øù‡™Œ4ØLÖx1»˜›_c|§Æïò"£{ïÉ˙ﬁ3?ÏK\D…≤õGÄÙ∆RjÍKeœWyB„#zÛ∑£^Ê§<†«”hã£IaÅì÷còè.ÕLË˚_iz∞–wy◊îÍÄvwúj¯ì]æªY—:‚Gw,¸&bﬂå»µA”Q∏iP’5 U,å±‘ª∂&´˝Õì•èL´k^”÷∑I|qJO@„9¯vÀkY Ñ!BƒäÁEX§h!ﬁ;›%{,Mc.å“Ëe:M¡ÑÌËMŸ¶÷i4/Î∏w¢;oeö¡+>GYΩ‡æc√Ç∂¢√o«+â$]·¥∑·êAìÒﬁc–‚•˝TÃ5Ï!û%ë\ÔÀ†Ì‚O{É«ìª1 å”Ë´àÌ™–	A?Â™˜%uÚ‰!+?d<P`„ûsÈÔË‡±fÄ34M›‚ªÔ%N#&ƒ›˝—&zùæt©œZùm∆ô¨M	ì—G"À∑#u~$∫sﬁˇ	;ŒØHJW9ìÄ1”ú±bØ,M≤—‡‰W»ÏïÀ–º‚ƒ^g7ˆ˘òXˇO±Ù˝ìﬁŒm»µ]÷z%äAÃ†5*™ãsVÎÙ“Œ:=ùuSÑ4¨F’£ë£) P˚Â5Ω1=˘ú≤◊√~ij!}qu.Qo´œŸª*g∆.~W—=o±¸ç…wªêFß.r/)Fß{ÈÅ∑eJÔ‰Ù¥7˚o≤≠Ìg§Ëˇ(g˛ˆßR¨}'¿¢V∞w&π∆j‡Ovæq2¸Ù]b),$¶2BxQΩñXuaÆ•ÎπòD›G«∏Ybù‡ºZπÉÍdŒ©
Xß08ï4 l‘√-»´v,ù ò≥f‰ui™1∑Vn†‚î˘ Q1≠%¸z%\ÿ·Œœgí4=L!"·|NjÔÀΩósë*ØÏ≈M…-Ä¶:Lµ±v∞r∆Ã‚A¢ÿ€IŸôM˝∫N ÏØ)hÀ†5Næ*±.”•«î‹ùﬁ‹„S≠.±è2µ,‹sRËìÓ‹GâÜ8—◊gÄéªóõ&¸Å˝:≥2≠†∞±Œ6,, ]1ó2<n4à±,\…JC\´Q›ÿÉ°Ú'z‘òJ° œuÃ°e?«*hrÿtfñLJ«“åê±¸>ıy'˜—†‚±J°UDx°äÒLqîH»&8<ghx©eÃ”GmuYˇ8öÅrcUáN!ÈΩù–vçÅq%†ìÀ4r
 )
4µƒù<≤óµV≥!H1¡j% >@=û´ÏNH÷‚R/=€ã;˜0óâëÓr›n2™[CRáQ«∂HU,R˜Ø∂∑çPπ˝£<êMK0nŸÃÁ{§£∂ï
UMàt2£'ÙÑï◊PHµ_ÓÆ{Ÿ"ﬂ[¸b“MÓœΩêëc[\z=â&~˙)4›Ÿ[òá’ Ïe£»ÉxΩønÿ/EDïˆçiGﬁ˝î4?jéjV©Ïlã„ìÄ*®ªïœ.x∏@§Ëê„„H%û∏>ù√ Jıú∏¿Mwy*02’!?êÄÂ›.k$é™Ω∑QoZÂ'÷ÏøS|¨∂◊LÑej¢U™ Ú‡P÷@_W:Î5ÙÖ⁄¿;∑é∂j‘Ê–ˇ¬|†“!Ê‘µ%™*úÊ$pcP9·òÜÇ˚É⁄{≈ﬂä∞~2Æ≥¡1∏[–@7°ÏÔ/WÚTéX "%ChÛÍbì)}»˝@ÖÂ]˜†q±Ûô◊˙K·∑⁄%D™d∂aVÕxCâ‚«Ö>Vz?«4S˜äÕñUX(á’(„◊NYx[.9äj±‡SŸÕæS∑„ô≠qÊViWõÂaø«pº8*’7FË9ÓAÿ™»ñ«˜¶÷∑¥&˛KjR1E‚-UT∆„¶zœüã¿ôR/»Ü˚ﬁZAµ◊jÃì;ﬂöÆ⁄$’¶ 6ÿˆQ∂;-Ó }DN›ËÂ∫∞ñ˙Áüˆ∆J˘˛dır≤‰Ñ_π†ì;n‡¨G∏ûöÛ˘I€≠II¸Àâ¡◊å‰úÕs@ÆÚ€Ÿ≈}Y◊6Ë0ãÄñ•EÀhû	÷oWﬂRk,(c≥æ±o„^a'ófE˛◊?˚∑˘Ê÷PÖ›¿lÿåd4Ù¶¥V_¿Jå?ÉwÔà\Âwv˝}i˝ÀÀ‘J—RG°+•Ç+ó®ìJP<Ñ+»FÉÌ˙VÊ8M]≠{◊˛'û\ÉdØC¢˝Ê”˙.ˇ≈
.*Ò∫›kGM{Ö…ÊÒ˝◊<±å◊^Ä}XØ;n£äïå(B‚b‘ñ„ΩıpÎ¶A
mMä@eùåƒ¨¥ÅîY”l?”)~QuxåöΩd®û∑)|π% ;O&rÃÕ‡U:}>ãæIjUKßFπy3Æ_˜t ™qµ3∞–lé¨∞≥¢WËÆ¯0‡«ò;|B∂ã¨˛Ú≠·|c]ËÈ£ª¡szæé>&/⁄>7p¿ÜmXyå9ò\vÏ
$«7©¿ëætç÷Ëu\z;I∑Ïª¸≤3Dπ0Ä†◊1≠ô*π˚—<∑ÕZè.„‚ój|Í¨ÎÕÓÎ˜Q¢R8äôΩçﬂ≠mgQ_Îœ@ê÷Ò%0&¥("?¿ôT•ÏÀi[ªêÔ2 î≈1gê∏æ√F(EnQ!Å‚∆’?ﬁ∫»t•d^[t·⁄òñ» ≈⁄w4ı}Ê™‚—ìFÇπh/óqJR0åzº]ªæKˇ73“]Î—ö¡/Azójÿ/¡E~Ÿ[ÀƒòÛ„üPñ·£Q&Æßîµ”ÚÈüXUVN 	“ælk€ΩÒe¨,)»ùPjpxˆ&L"?l©41∆ÌäèÅ©ƒ±úÏﬂV}∆Ë	[–ïÇÍ^O&ÙÌQzº™¿®q®ó¥pybÃc˜÷Içäa¬`Ìú≤AT¢É@-pß˚Ï.≥êHEø√D}z+ë^§%9?kà{áÀ‡0PÁÍ∑∂¶±◊¥Qñ¬Zœ≈èá5	ˇC#úfH√¨}ãC?vnO‹|œYÉ$!âkqÆ!I
yä€HDà¶Ê?w´¨¿}g94åbÚr™z=&–C€kææäŒÆ•‡ô˚Whâ)è:ª÷Ì@s>•ùê˘®ÁˆáÕ£xHæXx@ˇ≥óåwh¨„u‚ôîc*:)¯n—[ó±v˘íæÓb¬…É)ﬂÉÄnxˆë¥ã|T@[∞ÒqıÉAiπ=Aé\§Éü2©ì`˚Bøñ|ó»ÜOt>ZöNx]~æ¸G¡NéJbñ¬ÉÊj¡¸Ú◊h5A5e+Àgñ2˚áôﬂÜ~πI°ÿÅ2#ı˙,Ï_[CÁ‚WôKa≥ÙODô2ê˝r,»q√K°A≈6Ì≤’=¥”ÄrKöÚZ~éÒeFá1˚ﬂ≠¢/, e'©µTO,‘ ˜t[7•»ëÿ|™ò6˜AÉqP(óR≤v€⁄úÈ¿B[ˆ¢_öî‘>gH∑p†Å(ÎqH≈“?aµC∑
ˇà‘˝[Yn√Œã‘I DÆÁ¬7ä¢J∂^.πa"cŸ#ijZáøÄ“JN7Å›≤‘É"Æé C‘ì`sŸíö]‹<rQõb`áT˚˚™˘Ñ-Å,GÏÆÈj⁄q	)s¸ë.ZíLcè°Á
‹Õ#ä°t"6Cƒìjr6zgÜ©ﬂ…Øúq~‚˙´‘1g¨mbmVüªΩZ∂Ò-`k†ƒ≥ù§iÙı!YÜBÁvÁ?“∞I‚°¨ƒµ{±öãO|xƒù7K”gÊ∆1PzÇÀIZª#˝)EÆ	Y©ˆÄƒ†Â°M&]ªé¥•gkÍöÓ+ÇÛIv’|ZDW)’ôxbR\º55	ê¯îˆÈas^\`≈|ëªÛ;!s á8¬Ò™Îi0´3$Rh0q†ı¨[‡ﬂ-⁄qe©ƒ·óqá[∫|d—(A±ˇ´ÊÂ¶∏˜8˛r˚tÍ?6¸¶À]I‚W´oƒFw?ÜzO6OÎÄªœl»¢"+ŸM∏É€ﬁ
“ñ®¬	p\√‚„•Ë"f25%D@l_bYËC>Ï4iuM˘|≤˛âhlë¨%TND?ÎË¡ H•ÂŒmf2j∫U9´ÁΩ±≥π≈·p∞≤üTΩ¶Ó¥ÍÎ°∞0Äòù‹ıÌÄhàcjÁÄ»1}¸L±·n<ÛØKñc?
ùßâ#ÛÆd*RH©&≥dÄ<√t◊Ÿé≤$◊&™œi«>/§Ù#$ÑåÒG÷B…W/÷Wúıbä ’k-fﬂK(≥¯Ã˜π¢aé‹ﬂ"!ﬁ·)∏«XÊŸxk˝É§Ø±Ùh1X–´Úÿ¬_ﬂõR¿®Oﬁj9ƒï¯•°¿xè≈õóòQƒ-áâß«∏ê‚‘¥kŸÊJπ,å|DÉ»O=/qbRxZ{ﬂÆ† Yfª∏æ˘Ól¸e`LQet”LÊl,Ãˆ|Ì‚$#gCíà€R7àQÓ~å€§h¥∂â>iÒ~€ÔiMdJµµÙÖúæ,“YaM⁄È˜õc˚¢0Áïn:Â.õ•≈´‹qπÌÀqyá)Ìº&c?⁄À'”#>ó&ÌAõ<§˚Â∆ck:˘1b«zíP>bcÌ‡8IßHÊ¶qX©2úhœØ'eŒL]w¡èáâ"Ê6(‡/êóelu∫—#Á”6¥„VmUÁëHﬂk"6[V¿€hÌßjeYÊ{æ-Ï£	:<m`¢π€5⁄Õçgöé,ÀM≠π(gé{ÙUa‰¶i¸Eö?îC|†®œõ„Ì5xÆü'Â€ˆÕØeä9ó+!ï|ÊØª=·+Èõg‰§ﬁé‡C«zVz‡◊Ÿ¨6q∆¨ãﬂ≤2*8E%BAS∑=¥
*C´ê∞VªπE£ü˛NÅìë˙5"ÆZ<≥ËÚh Ó¸√ˇÙC,w@%(Tï†d´≤+-]¯9’Ÿ9eM•‡‚îùãπ•a§ÿî≈◊Ë1∏ÑÅSµUœò°È˝öòÅFr«OÂ◊≥⁄°W≠£áÏÔ≠kı˝¬sèÃ£’Ùçª!ô€à∏…€Ü¨ö∑Ñ5,a?TΩ8‰BsXÓÜo∏§É·≈‘f\Â∑≤îd^x±èêjîˆ⁄öYt‚∫4 d∏%Ω6„∏◊DﬂWhµÂ÷&ú¢7áá%E5Yñî∆üû”Iõ=˝q}û8}H{ƒÓq©¿‹£‰è‰%ºŸ~ãkA˘“„ÀªÁ