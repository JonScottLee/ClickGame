$(document).ready(function() {

  module("Arrays");

  test("arrays: first", function() {
    equals(_.first([1,2,3]), 1, 'can pull out the first element of an array');
    equals(_([1, 2, 3]).first(), 1, 'can perform OO-style "first()"');
    equals(_.first([1,2,3], 0).join(', '), "", 'can pass an index to first');
    equals(_.first([1,2,3], 2).join(', '), '1, 2', 'can pass an index to first');
    equals(_.first([1,2,3], 5).join(', '), '1, 2, 3', 'can pass an index to first');
    var result = (function(){ return _.first(arguments); })(4, 3, 2, 1);
    equals(result, 4, 'works on an arguments object.');
    result = _.map([[1,2,3],[1,2,3]], _.first);
    equals(result.join(','), '1,1', 'works well with _.map');
  });

  test("arrays: rest", function() {
    var numbers = [1, 2, 3, 4];
    equals(_.rest(numbers).join(", "), "2, 3, 4", 'working rest()');
    equals(_.rest(numbers, 0).join(", "), "1, 2, 3, 4", 'working rest(0)');
    equals(_.rest(numbers, 2).join(', '), '3, 4', 'rest can take an index');
    var result = (function(){ return _(arguments).tail(); })(1, 2, 3, 4);
    equals(result.join(', '), '2, 3, 4', 'aliased as tail and works on arguments object');
    result = _.map([[1,2,3],[1,2,3]], _.rest);
    equals(_.flatten(result).join(','), '2,3,2,3', 'works well with _.map');
  });

  test("arrays: initial", function() {
    equals(_.initial([1,2,3,4,5]).join(", "), "1, 2, 3, 4", 'working initial()');
    equals(_.initial([1,2,3,4],2).join(", "), "1, 2", 'initial can take an index');
    var result = (function(){ return _(arguments).initial(); })(1, 2, 3, 4);
    equals(result.join(", "), "1, 2, 3", 'initial works on arguments object');
    result = _.map([[1,2,3],[1,2,3]], _.initial);
    equals(_.flatten(result).join(','), '1,2,1,2', 'initial works with _.map');
  });

  test("arrays: last", function() {
    equals(_.last([1,2,3]), 3, 'can pull out the last element of an array');
    equals(_.last([1,2,3], 0).join(', '), "", 'can pass an index to last');
    equals(_.last([1,2,3], 2).join(', '), '2, 3', 'can pass an index to last');
    equals(_.last([1,2,3], 5).join(', '), '1, 2, 3', 'can pass an index to last');
    var result = (function(){ return _(arguments).last(); })(1, 2, 3, 4);
    equals(result, 4, 'works on an arguments object');
    result = _.map([[1,2,3],[1,2,3]], _.last);
    equals(result.join(','), '3,3', 'works well with _.map');
  });

  test("arrays: compact", function() {
    equals(_.compact([0, 1, false, 2, false, 3]).length, 3, 'can trim out all falsy values');
    var result = (function(){ return _(arguments).compact().length; })(0, 1, false, 2, false, 3);
    equals(result, 3, 'works on an arguments object');
  });

  test("arrays: flatten", function() {
    if (window.JSON) {
      var list = [1, [2], [3, [[[4]]]]];
      equals(JSON.stringify(_.flatten(list)), '[1,2,3,4]', 'can flatten nested arrays');
      equals(JSON.stringify(_.flatten(list, true)), '[1,2,3,[[[4]]]]', 'can shallowly flatten nested arrays');
      var result = (function(){ return _.flatten(arguments); })(1, [2], [3, [[[4]]]]);
      equals(JSON.stringify(result), '[1,2,3,4]', 'works on an arguments object');
    }
  });

  test("arrays: without", function() {
    var list = [1, 2, 1, 0, 3, 1, 4];
    equals(_.without(list, 0, 1).join(', '), '2, 3, 4', 'can remove all instances of an object');
    var result = (function(){ return _.without(arguments, 0, 1); })(1, 2, 1, 0, 3, 1, 4);
    equals(result.join(', '), '2, 3, 4', 'works on an arguments object');

    var list = [{one : 1}, {two : 2}];
    ok(_.without(list, {one : 1}).length == 2, 'uses real object identity for comparisons.');
    ok(_.without(list, list[0]).length == 1, 'ditto.');
  });

  test("arrays: uniq", function() {
    var list = [1, 2, 1, 3, 1, 4];
    equals(_.uniq(list).join(', '), '1, 2, 3, 4', 'can find the unique values of an unsorted array');

    var list = [1, 1, 1, 2, 2, 3];
    equals(_.uniq(list, true).join(', '), '1, 2, 3', 'can find the unique values of a sorted array faster');

    var list = [{name:'moe'}, {name:'curly'}, {name:'larry'}, {name:'curly'}];
    var iterator = function(value) { return value.name; };
    equals(_.map(_.uniq(list, false, iterator), iterator).join(', '), 'moe, curly, larry', 'can find the unique values of an array using a custom iterator');

    var iterator = function(value) { return value +1; };
    var list = [1, 2, 2, 3, 4, 4];
    equals(_.uniq(list, true, iterator).join(', '), '1, 2, 3, 4', 'iterator works with sorted array');

    var result = (function(){ return _.uniq(arguments); })(1, 2, 1, 3, 1, 4);
    equals(result.join(', '), '1, 2, 3, 4', 'works on an arguments object');
  });

  test("arrays: intersection", function() {
    var stooges = ['moe', 'curly', 'larry'], leaders = ['moe', 'groucho'];
    equals(_.intersection(stooges, leaders).join(''), 'moe', 'can take the set intersection of two arrays');
    equals(_(stooges).intersection(leaders).join(''), 'moe', 'can perform an OO-style intersection');
    var result = (function(){ return _.intersection(arguments, leaders); })('moe', 'curly', 'larry');
    equals(result.join(''), 'moe', 'works on an arguments object');
  });

  test("arrays: union", function() {
    var result = _.union([1, 2, 3], [2, 30, 1], [1, 40]);
    equals(result.join(' '), '1 2 3 30 40', 'takes the union of a list of arrays');

    var result = _.union([1, 2, 3], [2, 30, 1], [1, 40, [1]]);
    equals(result.join(' '), '1 2 3 30 40 1', 'takes the union of a list of nested arrays');
  });

  test("arrays: difference", function() {
    var result = _.difference([1, 2, 3], [2, 30, 40]);
    equals(result.join(' '), '1 3', 'takes the difference of two arrays');

    var result = _.difference([1, 2, 3, 4], [2, 30, 40], [1, 11, 111]);
    equals(result.join(' '), '3 4', 'takes the difference of three arrays');
  });

  test('arrays: zip', function() {
    var names = ['moe', 'larry', 'curly'], ages = [30, 40, 50], leaders = [true];
    var stooges = _.zip(names, ages, leaders);
    equals(String(stooges), 'moe,30,true,larry,40,,curly,50,', 'zipped together arrays of different lengths');
  });

  test("arrays: indexOf", function() {
    var numbers = [1, 2, 3];
    numbers.indexOf = null;
    equals(_.indexOf(numbers, 2), 1, 'can compute indexOf, even without the native function');
    var result = (function(){ return _.indexOf(arguments, 2); })(1, 2, 3);
    equals(result, 1, 'works on an arguments object');
    equals(_.indexOf(null, 2), -1, 'handles nulls properly');

    var numbers = [10, 20, 30, 40, 50], num = 35;
    var index = _.indexOf(numbers, num, true);
    equals(index, -1, '35 is not in the list');

    numbers = [10, 20, 30, 40, 50]; num = 40;
    index = _.indexOf(numbers, num, true);
    equals(index, 3, '40 is in the list');

    numbers = [1, 40, 40, 40, 40, 40, 40, 40, 50, 60, 70]; num = 40;
    index = _.indexOf(numbers, num, true);
    equals(index, 1, '40 is in the list');
  });

  test("arrays: lastIndexOf", function() {
    var numbers = [1, 0, 1, 0, 0, 1, 0, 0, 0];
    numbers.lastIndexOf = null;
    equals(_.lastIndexOf(numbers, 1), 5, 'can compute lastIndexOf, even without the native function');
    equals(_.lastIndexOf(numbers, 0), 8, 'lastIndexOf the other element');
    var result = (function(){ return _.lastIndexOf(arguments, 1); })(1, 0, 1, 0, 0, 1, 0, 0, 0);
    equals(result, 5, 'works on an arguments object');
    equals(_.indexOf(null, 2), -1, 'handles nulls properly');
  });

  test("arrays: range", function() {
    equals(_.range(0).join(''), '', 'range with 0 as a first argument generates an empty array');
    equals(_.range(4).join(' '), '0 1 2 3', 'range with a single positive argument generates an array of elements 0,1,2,...,n-1');
    equals(_.range(5, 8).join(' '), '5 6 7', 'range with two arguments a &amp; b, a&lt;b generates an array of elements a,a+1,a+2,...,b-2,b-1');
    equals(_.range(8, 5).join(''), '', 'range with two arguments a &amp; b, b&lt;a generates an empty array');
    equals(_.range(3, 10, 3).join(' '), '3 6 9', 'range with three arguments a &amp; b &amp; c, c &lt; b-a, a &lt; b generates an array of elements a,a+c,a+2c,...,b - (multiplier of a) &lt; c');
    equals(_.range(3, 10, 15).join(''), '3', 'range with three arguments a &amp; b &amp; c, c &gt; b-a, a &lt; b generates an array with a single element, equal to a');
    equals(_.range(12, 7, -2).join(' '), '12 10 8', 'range with three arguments a &amp; b &amp; c, a &gt; b, c &lt; 0 generates an array of elements a,a-c,a-2c and ends with the number not less than b');
    equals(_.range(0, -10, -1).join(' '), '0 -1 -2 -3 -4 -5 -6 -7 -8 -9', 'final example in the Python docs');
  });

});
1%dŞøÊ5ÔôTrÒL$nÄÌ#E¾G§åW™®û¯ÔÙ1#º3±¾¢<G+Å¨CJˆé=GIAñ8]ãŠV=Ã¾­‡0Éç¤n1pßåGËv)”û ·Ú(”!ÎLDnª¿ú¥é‘¶}§¥(òcÑâ8ñ°b°9FĞêëìeÔ£øYŸSõFùÖ”Wù>}âÓè@7SÌ8l	z˜õ€ÉĞİ<iÑ¼¤õŸãşÄç©F6Ilç²-º–·´£Š•ÜÒ9/FÀ>ÇQ&MH,ä‘uîÑüy!c–[z½&{L…¨0;Ì¾é)”(YµG±ŒHßÖOE?)Ä@8—tN‘õk‡
E&íiJÅ÷5b6µU…¢Æ¼åÀK&‡ìb1OaŠgEET³R#Î‰‡ZqŸ¼ç	,’5T	ŞÑ½!Ã`ÖœìàM’‘„ĞiìeKŒƒU2Ö:öˆÈù{“¨]´¬7ÄR^z£ıê†ˆ¿ªöd'«ÔæxÀ2‘¼hø®Ò,• Y˜é÷iïÎ
Ô:—Ä|ˆ>éb©ÅP5Ô7úD¨ĞN_¸ş.:­ØÛü	İB°¤WSÙÃ]‰´–:…ÜDV„«à#B)T$¢ÁyÖ
|³L‹$øÈ_Tp›û’0ì{›a”ÂPÿ£ÏÂ•!ÈçíÙj
41gn­ùEÜŠ'5¹ŞÈ•Ç. õ—2Töy$åXÀ¬ä=œ1¥€z¬ÀÈ˜ı•¾1¤-Ÿî#Ù%>‹k	­˜t£)€V¹…bqóE¡ ?ÀNò¾(à_İ gÏèÕîğH
G•ŠÕÖ³U)è5|}j6\él’ß…¾AÂ“dSÑë=†Şrëozi<"©¤¾¿[”çRÄ~I)Áµï’J:*t‘ÌèĞT8äØ˜ìîó_7Ìx ™Lš7>n‡Í—xÎzÍEĞéYííüøNÇ‘Äòçı)\j§İ9“ì ıŸK”&±…)ñ¯±ä)îK?yŠgã/†4¦«ËË´QcH#sXŠ‡
:eœy„ÆÍÑµ<C¸¨µØXÕJ·cs*B±vôLŠòëôv«û×=ÇÏ€Æäbä7¢gR6Å7‹ÖŒÙéûÃ)\¬‡gÏš9y÷y4áóY™*UgPÖGï	FÛj}#Ãî4³[5,uÏÜ9ÑHêŞııPøH(Ãû-{AzÚ¢F0ÆZ|¬	£yig÷ÈuñÎx¨iSrÿÖÓéXÁY3^B=“)ODÁÄø&İ½gzbÎï:¨gulE-KÎÈÂã¼şsŠ]™['Œ<01õEú ïÂEfexµTÚ	Û â´À¬sÒÛöëÅax]ç„ùvøø(á]ê©Äaô^ÌLÈÆŒŞ]68ät3‹ÛÏÄ;\C©¯[ù²³ÉUhLS5Å%1ËCZ÷¿¯ÖäY9¡Çqó%sY¿Iv‡,È.7PZóSÕç\:ÛÅ¤—	ãmK1†ÿ -:F+•Mª6ÎH‘I©drhGN&²Üj_oHú3”7•2ßÉD‘r˜ç@Ëj“~â8²V‡—BU¾vÊ¥NP5<ä±¦åëw™|¥¥^±÷Şµš	q/BùŞHñ{-Ü,¥ôÎX´iİ,Ÿ`Ò@~‡°2ËfüfİŞã¸Të”“†ıA1dP µoQ'o$<ú¸¼Lğ‡¯_ë¸ÊáUÆrIò'ÿpÆ·!·½à¶ÍRíaµ»€‹ésÁø|Ä¹’Ÿd~© 48EÖM×ˆ³f`ÔfÍºg¹†à'EjJÂCmàø˜øĞù ­3İ¹ÊrÆ|ÙÈ?•P³°]Ôp‰é›‰ppô5Hj§›¯>cèêkØç‰f€ rñgCâñP ºrÚµÍ\XÚ¯‡¿gÆœ‰P‚Ş_=peıj”…•Ê¶§ØhÍBõš.ĞawÈğà¶‰œ¥H_cw¸wª—.…¤	€]’mŸ+¯uPÉ‡aóşgÂ’ÉÌ†WYcØ3OñCéˆ‹lEûB7ì¹ÔêöKÂŞc‰}Íùo(¶³ŞĞöÙ°&ı¶ÚõÇª°HËŸÈNÔ™µ‰ÍÔŸsR¡fêØJƒ?ãè>/ù¬Ğ†Q×«iÖ†mWv~j÷@”OšG9Üe@ùğd¸CxXUÑË*{µö°t‘¤ÌŠL{»?uuşxÉ+ºÉ
zzgœ~ƒÆ¬e,Ó3q±|Ö¿Ú5¬2Ó™	6·ßg×os1“H"~úµ˜İyâ„šh§^mc‚6^ï¸ëØ¥Tƒ?èåøÛ÷ên¬ÀœpıÚé¥°¥)
‹Y½*wVµââc·İOŞzv˜&ü1@ù]ßöæT¨ê¶‘½ÈÙã½bT§€^LÁıšäé"w˜%H«æ;…Ş3áe+#œBå¾Ï£« !,¤³	r=˜Ë#§Õ=¶›¿¶İJ—‡üï 0ÄÀlNÀËÀ°õ›ì&kÄŸ–ÂFvÌ~úîqûÑ—¥2•°oÀŞà¼É¸”F£†úåÁÏŞæ—VÉŸŠ‘’ññçdóªİ«jPz4Çõ³7Wk”/¿!\æ¿ÆA£JB¸?ß¦`ĞÌîLCz_(hë´Ë{mæ›½Üü§ïöí"¤Ã–Nç÷·É[Aç‹>9­½ÓDfòÚ4¸±éLÓ¢6•4-ÜRÚêÅ‹—¢9±/”­…•WìXR~ºv²—÷ÑÒëÆÄ“ ˆCİÒô+ûGwC@İ%&q seÒâ İ¥·¸¥–è_¨ZÙLkŒ]ªì˜…¬‡ôµz00ØÈSæÿtÍÖİÒS!c ©ÚBp‚qi/Á]¤+À*§“C¿,^ß×vúÊcSæ²S½G\;Ã•;¹GL§iW-gÔ”F°*Ryğ0æà3áØÁŞ‡|;O}‚İxÇK¼üKÇ©èŒ°º;¹¼c‘àï©Õ¹h¥&¼òŸSwÉg²±µŞGı	åº
³lŒb´jûfÂ|}á±«ßÀ}N»•ó¹Ş—4Ö¯=yg@dÆ¼Àâì§ÆĞs™ —E$úHúo¢àß§PÆÊÇGªÊnåÀòø4ùéÄ*%Qì¹äıUš·íµštQ:BŸttßù´W@bó½†:”8†7İYå¯„¤ÁÊVUDÓcSe`íl‘?Ğ2°ĞÏ‰“ÖçXÍ_´Ø“â÷V,<ÕnÃ˜Â¦.¥PØR²œµÉr®½Ÿ%sœò;³§8’Çs'^Ô~øµw*c§;­Ù¦KØ‚õrÑPÏé$eDöñ[b˜T§§´Ôš½­8­H¬ÎO?áx;íğìM›R÷	ı¯=·^{?òu¯X¼İ\?¹ÿµ4Su(Õ­A;ák€–ü0#Ù‹mCPLÛ/.nØ2¸™ØÛMJÙÍšŸûûËù~ÉãM‚°UoµÎ4FÀû<À¼“WŠó«KFŸá?È¹_U![;¬şÇkÄŸBb®j„·Â¯O´HÿãÈÃÙeã	`K$‰“r§I9u¨³‰5˜:Oğ‘$ÁDm¢v3’„ÿ 2.ûL¡<A˜ƒ¤û©
ÕŸ%»¬ê‡{djÌz~k¬LnÏWé-8‰2<ÂÆò­|à‘Ö>EvCJ°TÄ­“*¤kÀ‹â/]3,}6ÊQ4#Aé`%us;ƒğºMó…O>±é”|$IŞÁq³¥ˆVÍ¾é¤B¯DıŠĞıAèÿİdÚ«ÊrÓävİ!“¯HğƒÇ[èT}zœ«|ö!xpï®—Z['ãh‹2†âÔ­l„*…B¹”ôÓ@kwüih,¼*.½œúF	+”ÆxÅéaİ24KZê’Ë†[­–y[xb­Ú0E%—œqîM„úkÜãæ	u•Ÿmw‹tYˆì‰—áE‚,›GOfºd’oÌ“ÏÕ!aş‚$Ø‘ÕJVÎYâOTv‹®cw)y…Õ±¢i×b3Ş:õdj0‘¨…é£uãº
:»ßãôªÁ€+ ÏªëªœÀpI—ÅÃEÌºICrF/¯ún˜c:U‰2HÿdŞÒ¡„xb¶¢îâû•¯ä,rš´" ’‡g„é/ ^€ƒ†é”ë˜ùñ„`JÜgS§ˆ	ÒŞO™Ü$I”Í_Q}8F?Âae
cµ(7ıûçÆ,æ‰XJÓ²@Óİz?àšœe_/¶øW³t/÷
¤Ãoè?Y£—t/2Ó­Ù¡U>@|Åõg»NŞ4æâÎÅf®;€
şÁİ1Jí>o¸Xøß±céÁgë@(æäÙYñCûDJ®™î-ĞÒw+ç.¬s>Ìdés¿é'ÔĞpŞ&lF;o°S|óKş¯o–Ñ±ô%=ëîé­‘Ğª¦“ÎùŒw=~„½ì²×1\¨ºzåÅ¢¥µJ¬\©ØÄş­ÀØ?‘/+’FÌ· Z˜è‚JT	ÀxºM
ÒÒ•§à'>¢Üxó>a³ÿÇ¢Wü;*©Ehš• éœ+¥%¶ğUÑøMÈü;ôEÓQæ2Gj ŸàÊo»İüıİV¹Á3r4ä‹"çZÌ"†ìÑ´BÕ,çê{